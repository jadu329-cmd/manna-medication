<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì–‘ì‚°êµíšŒ ì²­ë…„íšŒ ë§Œë‚˜ ë¬µìƒ</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg: #fbfbfc;
            --surface: #ffffff;
            --text: #2f2f33;
            --muted: #666a73;
            --border: #e9ecf1;
            --primary-50: #f7f5ff;
            --primary-100: #efeaff;
            --primary-200: #ded5ff;
            --primary-300: #c4b6ff;
            --primary-400: #a08dff;
            --primary-500: #7b64ff;
            --primary-600: #6a54f0;
            --accent: #12b886;
            --shadow: 0 8px 30px rgba(17, 17, 26, 0.05);
        }

        body {
            font-family: 'Noto Sans KR', 'Segoe UI', sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.7;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        header {
            background: linear-gradient(180deg, var(--surface) 0%, #f7f8fb 100%);
            padding: 56px 40px;
            text-align: center;
            border-radius: 20px;
            box-shadow: var(--shadow);
            margin-bottom: 36px;
            border: 1px solid var(--border);
        }

        h1 {
            color: var(--text);
            font-size: 2.4em;
            margin-bottom: 8px;
            font-weight: 700;
            letter-spacing: -0.02em;
        }

        .subtitle {
            color: var(--muted);
            font-size: 1.05em;
            font-weight: 400;
        }

        .home-section {
            background: var(--surface);
            padding: 36px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 28px;
            border: 1px solid var(--border);
        }

        .button-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 30px;
        }

        .nav-button {
            background: var(--surface);
            border: 1px solid var(--border);
            padding: 18px;
            border-radius: 12px;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
            text-align: center;
        }

        .nav-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 24px rgba(17, 17, 26, 0.06);
            border-color: var(--primary-200);
        }

        .nav-button h3 {
            color: var(--text);
            font-size: 1.1em;
        }

        .content-section {
            display: none;
            background: var(--surface);
            padding: 36px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 28px;
            border: 1px solid var(--border);
        }

        .content-section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h2 {
            color: var(--text);
            font-size: 1.8em;
            margin-bottom: 22px;
            padding-bottom: 12px;
            border-bottom: 2px solid var(--primary-100);
        }

        .back-button {
            background: linear-gradient(180deg, var(--primary-500), var(--primary-600));
            color: #fff;
            border: none;
            padding: 12px 22px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 0.95em;
            margin-top: 28px;
            transition: transform 0.15s ease, box-shadow 0.2s ease;
            box-shadow: 0 8px 24px rgba(123, 100, 255, 0.25);
            font-weight: 600;
        }

        .back-button:hover {
            transform: translateY(-1px);
            box-shadow: 0 10px 28px rgba(123, 100, 255, 0.28);
        }

        .btn-primary {
            background: var(--primary-500);
            color: #fff;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: background 0.2s ease;
            margin-bottom: 20px;
        }

        .btn-primary:hover {
            background: var(--primary-600);
        }

        /* Chapter Grid */
        .chapter-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 10px;
            margin: 20px 0;
        }

        .chapter-button {
            padding: 15px 10px;
            border: 1px solid var(--border);
            border-radius: 8px;
            background: var(--surface);
            cursor: pointer;
            text-align: center;
            transition: all 0.2s ease;
            font-weight: 600;
        }

        .chapter-button:hover {
            background: var(--primary-50);
            border-color: var(--primary-300);
            transform: translateY(-2px);
        }

        .chapter-button.has-content {
            background: var(--primary-100);
            border-color: var(--primary-300);
        }

        /* Meditation Card */
        .meditation-card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .meditation-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--primary-100);
        }

        .person-badge {
            display: inline-block;
            padding: 6px 14px;
            border-radius: 20px;
            background: var(--primary-100);
            color: var(--primary-600);
            font-size: 0.9em;
            font-weight: 700;
        }

        .person-count {
            font-size: 0.75em;
            color: var(--muted);
            margin-left: 8px;
        }

        .filter-section {
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            align-items: center;
        }

        .filter-button {
            padding: 8px 15px;
            border: 1px solid var(--border);
            border-radius: 20px;
            background: var(--surface);
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.9em;
        }

        .filter-button:hover {
            background: var(--primary-50);
            border-color: var(--primary-300);
        }

        .filter-button.active {
            background: var(--primary-500);
            color: white;
            border-color: var(--primary-500);
        }

        .meditation-date {
            color: var(--muted);
            font-size: 0.9em;
        }

        .meditation-content {
            padding: 15px;
            background: #fafbfc;
            border-radius: 8px;
            white-space: pre-wrap;
            line-height: 1.8;
            margin-top: 10px;
        }

        .verse-reference {
            font-weight: 600;
            color: var(--primary-600);
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal.active {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: var(--surface);
            padding: 30px;
            border-radius: 16px;
            max-width: 800px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--primary-100);
        }

        .modal-header h3 {
            font-size: 1.5em;
            color: var(--text);
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 2em;
            color: var(--muted);
            cursor: pointer;
            padding: 0;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            transition: background 0.2s ease;
        }

        .close-btn:hover {
            background: var(--border);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text);
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-family: inherit;
            font-size: 1em;
        }

        .form-group textarea {
            min-height: 150px;
            resize: vertical;
        }

        .comparison-view {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        .comparison-item {
            padding: 15px;
            border: 1px solid var(--border);
            border-radius: 8px;
            background: #f8f9fa;
        }

        .comparison-label {
            font-weight: 600;
            color: var(--primary-600);
            margin-bottom: 10px;
        }

        /* Bible Text Styles */
        .bible-text-section {
            background: #f8f9fa;
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 25px;
            margin: 20px 0;
        }

        .bible-reference-header {
            font-size: 1.3em;
            font-weight: 700;
            color: var(--primary-600);
            margin-bottom: 20px;
            text-align: center;
            padding: 10px;
            background: var(--primary-50);
            border-radius: 8px;
        }

        .bible-verse {
            margin-bottom: 12px;
            line-height: 1.9;
            display: flex;
            align-items: baseline;
        }

        .verse-number {
            color: rgba(47, 47, 51, 0.4);
            font-weight: 600;
            margin-right: 8px;
            min-width: 25px;
            text-align: right;
            font-size: 0.95em;
        }

        .verse-text {
            flex: 1;
            color: var(--text);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ì–‘ì‚°êµíšŒ ì²­ë…„íšŒ ë§Œë‚˜ ë¬µìƒ</h1>
            <p class="subtitle">í•˜ë‚˜ë‹˜ì˜ ë§ì”€ê³¼ í•¨ê»˜í•˜ëŠ” ë¬µìƒ ì—¬ì •</p>
        </header>

        <div id="home" class="home-section">
            <h2>ğŸ“– ì„±ê²½ ëª©ì°¨</h2>
            <div class="button-grid" id="books-grid">
                <!-- ì„±ê²½ ëª©ë¡ì´ ì—¬ê¸°ì— ìƒì„±ë©ë‹ˆë‹¤ -->
            </div>
        </div>

        <!-- ì„±ê²½ë³„ ì„¹ì…˜ë“¤ -->
        <div id="book-content" class="content-section">
            <h2 id="book-title"></h2>
            <div id="chapter-grid" class="chapter-grid">
                <!-- ì¥ ë²„íŠ¼ë“¤ì´ ì—¬ê¸°ì— ìƒì„±ë©ë‹ˆë‹¤ -->
            </div>
            <button class="back-button" onclick="showHome()">â† ëª©ì°¨ë¡œ ëŒì•„ê°€ê¸°</button>
        </div>

        <!-- ì¥ë³„ ë¬µìƒ ë‚´ìš© ì„¹ì…˜ -->
        <div id="chapter-content" class="content-section">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h2 id="chapter-title"></h2>
                <div style="display: flex; gap: 10px;">
                    <button class="btn-primary" onclick="manageBibleText()" style="background: var(--accent);">ğŸ“– ë³¸ë¬¸ ê´€ë¦¬</button>
                    <button class="btn-primary" onclick="openMeditationModal()">+ ìƒˆ ë¬µìƒ ì¶”ê°€</button>
                </div>
            </div>
            
            <!-- ì„±ê²½ ë³¸ë¬¸ í‘œì‹œ ì˜ì—­ (í•­ìƒ í‘œì‹œ) -->
            <div id="bible-text-container">
                <!-- ì„±ê²½ ë³¸ë¬¸ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
            </div>
            
            <!-- ì‚¬ëŒë³„ í•„í„° -->
            <div class="filter-section" id="person-filter">
                <!-- ì‚¬ëŒ í•„í„° ë²„íŠ¼ë“¤ì´ ì—¬ê¸°ì— ìƒì„±ë©ë‹ˆë‹¤ -->
            </div>
            
            <div id="meditation-list" style="margin-top: 20px;">
                <!-- ë¬µìƒ ë‚´ìš©ë“¤ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
            </div>
            <button class="back-button" onclick="showBookChapters()">â† ì¥ ëª©ë¡ìœ¼ë¡œ</button>
        </div>
    </div>

    <!-- ë¬µìƒ ì¶”ê°€/ìˆ˜ì • ëª¨ë‹¬ -->
    <div id="meditation-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ë¬µìƒ ì¶”ê°€</h3>
                <button class="close-btn" onclick="closeMeditationModal()">&times;</button>
            </div>
            <form id="meditation-form" onsubmit="saveMeditation(event)">
                <div class="form-group">
                    <label>ì‘ì„±ì</label>
                    <select id="meditation-person" required style="width: 100%; padding: 10px; border: 1px solid var(--border); border-radius: 8px; font-family: inherit; font-size: 1em;">
                        <!-- ì‚¬ëŒ ëª©ë¡ì´ ì—¬ê¸°ì— ìƒì„±ë©ë‹ˆë‹¤ -->
                    </select>
                    <div style="margin-top: 10px;">
                        <input type="text" id="new-person-name" placeholder="ìƒˆ ì‘ì„±ì ì¶”ê°€" style="width: 200px; margin-right: 10px;">
                        <button type="button" class="btn-primary" onclick="addNewPerson()" style="padding: 8px 15px;">+ ì¶”ê°€</button>
                    </div>
                </div>
                <div class="form-group">
                    <label>ë¬µìƒ ë‚ ì§œ</label>
                    <input type="date" id="meditation-date" required>
                </div>
                <div class="form-group">
                    <label>ë¬µìƒ ë‚´ìš©</label>
                    <textarea id="meditation-content" placeholder="ë¬µìƒí•œ ë‚´ìš©ì„ ììœ ë¡­ê²Œ ì‘ì„±í•˜ì„¸ìš”..." required></textarea>
                </div>
                <button type="submit" class="btn-primary">ì €ì¥</button>
            </form>
        </div>
    </div>

    <!-- ë¬µìƒ ë¹„êµ ëª¨ë‹¬ -->
    <div id="comparison-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="comparison-title"></h3>
                <button class="close-btn" onclick="closeComparisonModal()">&times;</button>
            </div>
            <div id="comparison-content"></div>
        </div>
    </div>

    <!-- ì„±ê²½ ë³¸ë¬¸ ì…ë ¥ ëª¨ë‹¬ -->
    <div id="bible-text-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="bible-text-modal-title">ì„±ê²½ ë³¸ë¬¸ ì…ë ¥</h3>
                <button class="close-btn" onclick="closeBibleTextModal()">&times;</button>
            </div>
            <form id="bible-text-form" onsubmit="saveBibleText(event)">
                <div class="form-group">
                    <label>ì„±ê²½ ë³¸ë¬¸ ë¶™ì—¬ë„£ê¸°</label>
                    <textarea id="bible-text-input" placeholder="ì„±ê²½ ì•±ì—ì„œ ë³µì‚¬í•œ ë‚´ìš©ì„ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”.&#10;&#10;ì˜ˆì‹œ:&#10;3:1-5&#10;1 ì–´ë¦¬ì„ë„ë‹¤ ê°ˆë¼ë””ì•„ ì‚¬ëŒë“¤ì•„...&#10;2 ë‚´ê°€ ë„ˆí¬ì—ê²Œ ë‹¤ë§Œ...&#10;3 ë„ˆí¬ê°€ ì´ê°™ì´...&#10;&#10;ë˜ëŠ”&#10;&#10;3:1-5&#10;1|ì–´ë¦¬ì„ë„ë‹¤ ê°ˆë¼ë””ì•„...&#10;2|ë‚´ê°€ ë„ˆí¬ì—ê²Œ..." style="min-height: 300px;" required></textarea>
                    <small style="color: var(--muted); display: block; margin-top: 5px;">* ê¸´ ë³¸ë¬¸ë„ ììœ ë¡­ê²Œ ë¶™ì—¬ë„£ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤</small>
                </div>
                <div style="display: flex; gap: 10px;">
                    <button type="submit" class="btn-primary">ì €ì¥</button>
                    <button type="button" class="btn-primary" onclick="closeBibleTextModal()" style="background: var(--muted);">ì·¨ì†Œ</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Firebase ì„¤ì •
        const firebaseConfig = {
            apiKey: "AIzaSyCF6KyHu8XnjSycJvE4H0ChU7rymGm5JX4",
            authDomain: "manna-medication.firebaseapp.com",
            databaseURL: "https://manna-medication-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "manna-medication",
            storageBucket: "manna-medication.firebasestorage.app",
            messagingSenderId: "451972889558",
            appId: "1:451972889558:web:3f0f35a5b986cdacc88277",
            measurementId: "G-MF2NWZSJZ7"
        };

        // Firebase ì´ˆê¸°í™”
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        // ì‹ ì•½ ì„±ê²½ ëª©ë¡ (ì‚¬ë„í–‰ì „ ~ ìœ ë‹¤ì„œ)
        const bibleBooks = [
            { id: 'acts', name: 'ì‚¬ë„í–‰ì „', chapters: 28 },
            { id: 'romans', name: 'ë¡œë§ˆì„œ', chapters: 16 },
            { id: '1corinthians', name: 'ê³ ë¦°ë„ì „ì„œ', chapters: 16 },
            { id: '2corinthians', name: 'ê³ ë¦°ë„í›„ì„œ', chapters: 13 },
            { id: 'galatians', name: 'ê°ˆë¼ë””ì•„ì„œ', chapters: 6 },
            { id: 'ephesians', name: 'ì—ë² ì†Œì„œ', chapters: 6 },
            { id: 'philippians', name: 'ë¹Œë¦½ë³´ì„œ', chapters: 4 },
            { id: 'colossians', name: 'ê³¨ë¡œìƒˆì„œ', chapters: 4 },
            { id: '1thessalonians', name: 'ë°ì‚´ë¡œë‹ˆê°€ì „ì„œ', chapters: 5 },
            { id: '2thessalonians', name: 'ë°ì‚´ë¡œë‹ˆê°€í›„ì„œ', chapters: 3 },
            { id: '1timothy', name: 'ë””ëª¨ë°ì „ì„œ', chapters: 6 },
            { id: '2timothy', name: 'ë””ëª¨ë°í›„ì„œ', chapters: 4 },
            { id: 'titus', name: 'ë””ë„ì„œ', chapters: 3 },
            { id: 'philemon', name: 'ë¹Œë ˆëª¬ì„œ', chapters: 1 },
            { id: 'hebrews', name: 'íˆë¸Œë¦¬ì„œ', chapters: 13 },
            { id: 'james', name: 'ì•¼ê³ ë³´ì„œ', chapters: 5 },
            { id: '1peter', name: 'ë² ë“œë¡œì „ì„œ', chapters: 5 },
            { id: '2peter', name: 'ë² ë“œë¡œí›„ì„œ', chapters: 3 },
            { id: '1john', name: 'ìš”í•œ1ì„œ', chapters: 5 },
            { id: '2john', name: 'ìš”í•œ2ì„œ', chapters: 1 },
            { id: '3john', name: 'ìš”í•œ3ì„œ', chapters: 1 },
            { id: 'jude', name: 'ìœ ë‹¤ì„œ', chapters: 1 }
        ];

        let meditations = {};
        let personsList = ['ìœ¤ì¤‘ê·¼', 'ë°•ì§€í›ˆ', 'ê¹€í–‰ë¯¸', 'ì§€ë³´ì€', 'ê¹€ì •ì´'];
        let currentPersonFilter = 'all'; // í˜„ì¬ í•„í„° (all = ì „ì²´)
        let bibleTexts = {
            // ê°ˆë¼ë””ì•„ì„œ ìƒ˜í”Œ ë°ì´í„°
            'galatians': {
                3: {
                    range: '3:1-5',
                    verses: [
                        { num: 1, text: 'ì–´ë¦¬ì„ë„ë‹¤ ê°ˆë¼ë””ì•„ ì‚¬ëŒë“¤ì•„ ì˜ˆìˆ˜ ê·¸ë¦¬ìŠ¤ë„ê»˜ì„œ ì‹­ìê°€ì— ëª» ë°•íˆì‹  ê²ƒì´ ë„ˆí¬ ëˆˆì•ì— ë°íˆ ë³´ì´ê±°ëŠ˜ ëˆ„ê°€ ë„ˆí¬ë¥¼ ê¾€ë”ëƒ' },
                        { num: 2, text: 'ë‚´ê°€ ë„ˆí¬ì—ê²Œ ë‹¤ë§Œ ì´ê²ƒì„ ì•Œë ¤ í•˜ë…¸ë‹ˆ ë„ˆí¬ê°€ ì„±ë ¹ì„ ë°›ì€ ê²ƒì€ ìœ¨ë²•ì˜ í–‰ìœ„ë¡œëƒ ë“£ê³  ë¯¿ìŒìœ¼ë¡œëƒ' },
                        { num: 3, text: 'ë„ˆí¬ê°€ ì´ê°™ì´ ì–´ë¦¬ì„ìœ¼ëƒ ì„±ë ¹ìœ¼ë¡œ ì‹œì‘í•˜ì˜€ë‹¤ê°€ ì´ì œëŠ” ìœ¡ì²´ë¡œ ë§ˆì¹˜ê² ëŠëƒ' },
                        { num: 4, text: 'ë„ˆí¬ê°€ ì´ê°™ì´ ë§ì€ ê´´ë¡œì›€ì„ í—›ë˜ì´ ë°›ì•˜ëŠëƒ ê³¼ì—° í—›ë˜ëƒ' },
                        { num: 5, text: 'ë„ˆí¬ì—ê²Œ ì„±ë ¹ì„ ì£¼ì‹œê³  ë„ˆí¬ ê°€ìš´ë°ì„œ ëŠ¥ë ¥ì„ í–‰í•˜ì‹œëŠ” ì´ì˜ ì¼ì´ ìœ¨ë²•ì˜ í–‰ìœ„ì—ì„œëƒ ë“£ê³  ë¯¿ìŒì—ì„œëƒ' }
                    ]
                },
                4: {
                    range: '4:2-7',
                    verses: [
                        { num: 2, text: 'ê·¸ ì•„ë²„ì§€ì˜ ì •í•œ ë•Œê¹Œì§€ í›„ê²¬ì¸ê³¼ ì²­ì§€ê¸° ì•„ë˜ ìˆë‚˜ë‹ˆ' },
                        { num: 3, text: 'ì´ì™€ ê°™ì´ ìš°ë¦¬ë„ ì–´ë ¸ì„ ë•Œì— ì´ ì„¸ìƒ ì´ˆë“± í•™ë¬¸ ì•„ë˜ ìˆì–´ì„œ ì¢…ë…¸ë¦‡ í•˜ì˜€ë”ë‹ˆ' },
                        { num: 4, text: 'ë•Œê°€ ì°¨ë§¤ í•˜ë‚˜ë‹˜ì´ ê·¸ ì•„ë“¤ì„ ë³´ë‚´ì‚¬ ì—¬ìì—ê²Œì„œ ë‚˜ê²Œ í•˜ì‹œê³  ìœ¨ë²• ì•„ë˜ ë‚˜ê²Œ í•˜ì‹  ê²ƒì€' },
                        { num: 5, text: 'ìœ¨ë²• ì•„ë˜ ìˆëŠ” ìë“¤ì„ ì†ëŸ‰í•˜ì‹œê³  ìš°ë¦¬ë¡œ ì•„ë“¤ì˜ ëª…ë¶„ì„ ì–»ê²Œ í•˜ë ¤ í•˜ì‹¬ì´ë¼' },
                        { num: 6, text: 'ë„ˆí¬ê°€ ì•„ë“¤ì¸ê³ ë¡œ í•˜ë‚˜ë‹˜ì´ ê·¸ ì•„ë“¤ì˜ ì˜ì„ ìš°ë¦¬ ë§ˆìŒ ê°€ìš´ë° ë³´ë‚´ì‚¬ ì•„ë°” ì•„ë²„ì§€ë¼ ë¶€ë¥´ê²Œ í•˜ì…¨ëŠë‹ˆë¼' },
                        { num: 7, text: 'ê·¸ëŸ¬ë¯€ë¡œ ë„¤ê°€ ì´ í›„ë¡œëŠ” ì¢…ì´ ì•„ë‹ˆìš” ì•„ë“¤ì´ë‹ˆ ì•„ë“¤ì´ë©´ í•˜ë‚˜ë‹˜ìœ¼ë¡œ ë§ë¯¸ì•”ì•„ ìœ ì—…ì„ ì´ì„ ìë‹ˆë¼' }
                    ]
                }
            }
        };
        let currentBook = null;
        let currentChapter = null;

        // ì´ˆê¸°í™”
        function init() {
            renderBooksGrid();
        }

        function renderBooksGrid() {
            const grid = document.getElementById('books-grid');
            grid.innerHTML = '';
            
            bibleBooks.forEach(book => {
                const button = document.createElement('div');
                button.className = 'nav-button';
                button.onclick = () => showBook(book.id);
                
                const h3 = document.createElement('h3');
                h3.textContent = book.name;
                button.appendChild(h3);
                
                grid.appendChild(button);
            });
        }

        function getMeditationCount(bookId) {
            if (!meditations[bookId]) return 0;
            let count = 0;
            Object.keys(meditations[bookId]).forEach(chapter => {
                count += meditations[bookId][chapter].length;
            });
            return count;
        }

        function showBook(bookId) {
            currentBook = bookId;
            const book = bibleBooks.find(b => b.id === bookId);
            
            document.getElementById('home').style.display = 'none';
            document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
            
            document.getElementById('book-title').textContent = book.name;
            
            // ì¥ ë²„íŠ¼ ìƒì„±
            const chapterGrid = document.getElementById('chapter-grid');
            chapterGrid.innerHTML = '';
            
            for (let i = 1; i <= book.chapters; i++) {
                const button = document.createElement('div');
                button.className = 'chapter-button';
                button.textContent = `${i}ì¥`;
                button.onclick = () => showChapter(bookId, i);
                
                // ë¬µìƒì´ ìˆëŠ” ì¥ì€ í‘œì‹œ
                if (meditations[bookId] && meditations[bookId][i] && meditations[bookId][i].length > 0) {
                    button.classList.add('has-content');
                }
                
                chapterGrid.appendChild(button);
            }
            
            document.getElementById('book-content').classList.add('active');
        }

        function showChapter(bookId, chapter) {
            currentBook = bookId;
            currentChapter = chapter;
            currentPersonFilter = 'all'; // í•„í„° ì´ˆê¸°í™”
            const book = bibleBooks.find(b => b.id === bookId);
            
            document.getElementById('book-content').classList.remove('active');
            document.getElementById('chapter-title').textContent = `${book.name} ${chapter}ì¥`;
            
            renderBibleText(); // ì„±ê²½ ë³¸ë¬¸ í•­ìƒ í‘œì‹œ
            renderPersonFilter(); // ì‚¬ëŒ í•„í„° í‘œì‹œ
            renderMeditationList();
            
            document.getElementById('chapter-content').classList.add('active');
        }

        function renderPersonFilter() {
            const container = document.getElementById('person-filter');
            container.innerHTML = '<span style="font-weight: 600; color: var(--text); margin-right: 10px;">ì‘ì„±ì:</span>';
            
            // ì „ì²´ ë³´ê¸° ë²„íŠ¼
            const allButton = document.createElement('button');
            allButton.className = 'filter-button';
            if (currentPersonFilter === 'all') allButton.classList.add('active');
            allButton.textContent = 'ì „ì²´';
            allButton.onclick = () => filterByPerson('all');
            container.appendChild(allButton);
            
            // ì´ ì¥ì— ë¬µìƒì„ ì‘ì„±í•œ ì‚¬ëŒ ëª©ë¡
            const personsInChapter = new Set();
            if (meditations[currentBook] && meditations[currentBook][currentChapter]) {
                meditations[currentBook][currentChapter].forEach(med => {
                    if (med.person) personsInChapter.add(med.person);
                });
            }
            
            // ì‚¬ëŒë³„ ë²„íŠ¼
            personsList.forEach(person => {
                if (personsInChapter.has(person)) {
                    const count = meditations[currentBook][currentChapter].filter(m => m.person === person).length;
                    const button = document.createElement('button');
                    button.className = 'filter-button';
                    if (currentPersonFilter === person) button.classList.add('active');
                    button.textContent = `${person} (${count})`;
                    button.onclick = () => filterByPerson(person);
                    container.appendChild(button);
                }
            });
        }

        function filterByPerson(person) {
            currentPersonFilter = person;
            renderPersonFilter();
            renderMeditationList();
        }

        function renderMeditationList() {
            const list = document.getElementById('meditation-list');
            list.innerHTML = '';
            
            if (!meditations[currentBook] || !meditations[currentBook][currentChapter] || 
                meditations[currentBook][currentChapter].length === 0) {
                list.innerHTML = '<p style="color: var(--muted); text-align: center; padding: 40px;">ì•„ì§ ë¬µìƒ ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤. ìƒˆ ë¬µìƒì„ ì¶”ê°€í•´ì£¼ì„¸ìš”.</p>';
                return;
            }
            
            let chapterMeditations = meditations[currentBook][currentChapter];
            
            // ì‚¬ëŒ í•„í„° ì ìš©
            if (currentPersonFilter !== 'all') {
                chapterMeditations = chapterMeditations.filter(m => m.person === currentPersonFilter);
            }
            
            if (chapterMeditations.length === 0) {
                list.innerHTML = '<p style="color: var(--muted); text-align: center; padding: 40px;">ì„ íƒí•œ ì‘ì„±ìì˜ ë¬µìƒì´ ì—†ìŠµë‹ˆë‹¤.</p>';
                return;
            }
            
            // ë‚ ì§œ ì—­ìˆœìœ¼ë¡œ ì •ë ¬ (ìµœì‹ ì´ ìœ„ë¡œ)
            chapterMeditations.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            chapterMeditations.forEach((med, index) => {
                // ì›ë³¸ ë°°ì—´ì—ì„œì˜ ì¸ë±ìŠ¤ ì°¾ê¸°
                const originalIndex = meditations[currentBook][currentChapter].indexOf(med);
                
                // ê°™ì€ ì‚¬ëŒì˜ ë¬µìƒ ê°œìˆ˜
                const personMeditations = meditations[currentBook][currentChapter].filter(m => m.person === med.person);
                const personMeditationIndex = personMeditations.indexOf(med) + 1;
                
                const card = document.createElement('div');
                card.className = 'meditation-card';
                
                card.innerHTML = `
                    <div class="meditation-header">
                        <div>
                            <span class="person-badge">${med.person}</span>
                            <span class="person-count">(${personMeditationIndex}ë²ˆì§¸ ë¬µìƒ)</span>
                            <span class="meditation-date" style="margin-left: 15px;">${med.date}</span>
                        </div>
                        <div>
                            <button class="btn-primary" onclick="copyMeditationToClipboard(${originalIndex})" style="padding: 6px 12px; font-size: 0.85em; background: #12b886; margin-right: 5px;">ğŸ“‹ ë³µì‚¬</button>
                            <button class="btn-primary" onclick="editMeditation(${originalIndex})" style="padding: 6px 12px; font-size: 0.85em; background: var(--accent);">ìˆ˜ì •</button>
                            <button class="btn-primary" onclick="deleteMeditation(${originalIndex})" style="padding: 6px 12px; font-size: 0.85em; background: #e74c3c;">ì‚­ì œ</button>
                        </div>
                    </div>
                    <div class="meditation-content">${med.content}</div>
                `;
                
                list.appendChild(card);
            });
        }

        function showHome() {
            document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
            document.getElementById('home').style.display = 'block';
            currentBook = null;
            currentChapter = null;
        }

        function showBookChapters() {
            document.getElementById('chapter-content').classList.remove('active');
            showBook(currentBook);
        }

        // Modal functions
        function openMeditationModal() {
            document.getElementById('meditation-modal').classList.add('active');
            document.getElementById('meditation-form').reset();
            document.getElementById('meditation-date').value = new Date().toISOString().split('T')[0];
            renderPersonSelect();
        }

        function renderPersonSelect() {
            const select = document.getElementById('meditation-person');
            select.innerHTML = '<option value="">ì„ íƒí•˜ì„¸ìš”</option>';
            
            personsList.forEach(person => {
                const option = document.createElement('option');
                option.value = person;
                option.textContent = person;
                select.appendChild(option);
            });
        }

        function addNewPerson() {
            const input = document.getElementById('new-person-name');
            const name = input.value.trim();
            
            if (name && !personsList.includes(name)) {
                personsList.push(name);
                
                // Firebaseì— ì €ì¥
                database.ref('personsList').set(personsList);
                
                renderPersonSelect();
                input.value = '';
                document.getElementById('meditation-person').value = name;
            } else if (personsList.includes(name)) {
                alert('ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì‘ì„±ìì…ë‹ˆë‹¤.');
                document.getElementById('meditation-person').value = name;
            }
        }

        function closeMeditationModal() {
            document.getElementById('meditation-modal').classList.remove('active');
        }

        function saveMeditation(event) {
            event.preventDefault();
            
            const person = document.getElementById('meditation-person').value;
            const date = document.getElementById('meditation-date').value;
            const content = document.getElementById('meditation-content').value;
            
            if (!person) {
                alert('ì‘ì„±ìë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }
            
            // ì„±ê²½ ë³¸ë¬¸ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
            const bibleData = bibleTexts[currentBook] && bibleTexts[currentBook][currentChapter];
            const verse = bibleData ? bibleData.range : '';
            
            if (!meditations[currentBook]) {
                meditations[currentBook] = {};
            }
            if (!meditations[currentBook][currentChapter]) {
                meditations[currentBook][currentChapter] = [];
            }
            
            const newMeditation = {
                verse: verse,
                date: date,
                content: content,
                person: person,
                timestamp: Date.now()
            };
            
            meditations[currentBook][currentChapter].push(newMeditation);
            
            // Firebaseì— ì €ì¥
            database.ref('meditations').set(meditations);
            
            closeMeditationModal();
        }

        function editMeditation(index) {
            const med = meditations[currentBook][currentChapter][index];
            
            renderPersonSelect();
            document.getElementById('meditation-person').value = med.person;
            document.getElementById('meditation-date').value = med.date;
            document.getElementById('meditation-content').value = med.content;
            
            // ê¸°ì¡´ ë¬µìƒ ì‚­ì œ í›„ ìƒˆë¡œ ì €ì¥
            meditations[currentBook][currentChapter].splice(index, 1);
            
            document.getElementById('meditation-modal').classList.add('active');
        }

        function deleteMeditation(index) {
            if (confirm('ì´ ë¬µìƒì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                meditations[currentBook][currentChapter].splice(index, 1);
                
                // Firebaseì— ì €ì¥
                database.ref('meditations').set(meditations);
            }
        }

        function compareMeditations(currentIndex) {
            const chapterMeds = meditations[currentBook][currentChapter];
            const current = chapterMeds[currentIndex];
            
            // ê°™ì€ ì‚¬ëŒì˜ ì´ì „ ë¬µìƒ ì°¾ê¸°
            const personMeds = chapterMeds.filter(m => m.person === current.person);
            const currentPersonIndex = personMeds.indexOf(current);
            
            if (currentPersonIndex === 0) {
                alert('ì´ì „ ë¬µìƒì´ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }
            
            const previous = personMeds[currentPersonIndex - 1];
            const book = bibleBooks.find(b => b.id === currentBook);
            
            document.getElementById('comparison-title').textContent = 
                `${book.name} ${currentChapter}ì¥ - ${current.person} ë¬µìƒ ë¹„êµ`;
            
            const content = document.getElementById('comparison-content');
            content.innerHTML = `
                <div class="comparison-view">
                    <div class="comparison-item">
                        <div class="comparison-label">ì´ì „ ë¬µìƒ (${previous.date})</div>
                        <div class="meditation-content">${previous.content}</div>
                    </div>
                    <div class="comparison-item">
                        <div class="comparison-label">í˜„ì¬ ë¬µìƒ (${current.date})</div>
                        <div class="meditation-content">${current.content}</div>
                    </div>
                </div>
            `;
            
            document.getElementById('comparison-modal').classList.add('active');
        }

        function closeComparisonModal() {
            document.getElementById('comparison-modal').classList.remove('active');
        }

        function renderBibleText() {
            const container = document.getElementById('bible-text-container');
            
            // í•´ë‹¹ ì¥ì˜ ì„±ê²½ ë³¸ë¬¸ì´ ìˆëŠ”ì§€ í™•ì¸
            if (!bibleTexts[currentBook] || !bibleTexts[currentBook][currentChapter]) {
                container.innerHTML = `
                    <div class="bible-text-section">
                        <p style="color: var(--muted); text-align: center;">ì´ ì¥ì˜ ì„±ê²½ ë³¸ë¬¸ì´ ì•„ì§ ë“±ë¡ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.</p>
                        <button class="btn-primary" onclick="addBibleText()" style="display: block; margin: 20px auto;">ğŸ“– ì„±ê²½ ë³¸ë¬¸ ì¶”ê°€í•˜ê¸°</button>
                    </div>
                `;
                return;
            }
            
            const book = bibleBooks.find(b => b.id === currentBook);
            const bibleData = bibleTexts[currentBook][currentChapter];
            
            let versesHTML = '';
            bibleData.verses.forEach(verse => {
                versesHTML += `
                    <div class="bible-verse">
                        <span class="verse-number">${verse.num}</span>
                        <span class="verse-text">${verse.text}</span>
                    </div>
                `;
            });
            
            container.innerHTML = `
                <div class="bible-text-section">
                    <div class="bible-reference-header">${book.name} ${bibleData.range}</div>
                    ${versesHTML}
                </div>
            `;
        }

        function addBibleText() {
            document.getElementById('bible-text-modal-title').textContent = 'ì„±ê²½ ë³¸ë¬¸ ì¶”ê°€';
            document.getElementById('bible-text-input').value = '';
            document.getElementById('bible-text-modal').classList.add('active');
        }

        function closeBibleTextModal() {
            document.getElementById('bible-text-modal').classList.remove('active');
        }

        function saveBibleText(event) {
            event.preventDefault();
            
            const input = document.getElementById('bible-text-input').value;
            
            if (!input || !input.trim()) return;
            
            // ì…ë ¥ í˜•ì‹ ìë™ ê°ì§€
            if (input.includes('|')) {
                // ìˆ˜ë™ ì…ë ¥ (ì ˆ|ë³¸ë¬¸)
                parseBibleText(input);
            } else {
                // ë³µì‚¬-ë¶™ì—¬ë„£ê¸° (ìë™ íŒŒì‹±)
                parseSmartBibleInput(input);
            }
            
            closeBibleTextModal();
        }

        function parseSmartBibleInput(input) {
            const lines = input.trim().split('\n');
            if (lines.length < 2) {
                alert('í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                return;
            }
            
            // ì²« ì¤„ì—ì„œ ë²”ìœ„ ì¶”ì¶œ (ì˜ˆ: ê°ˆ3:1-5 ë˜ëŠ” 3:1-5)
            const firstLine = lines[0].trim();
            const rangeMatch = firstLine.match(/(\d+):(\d+)-?(\d+)?/);
            
            if (!rangeMatch) {
                alert('ì²« ì¤„ì— êµ¬ì ˆ ë²”ìœ„ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”. ì˜ˆ: 3:1-5');
                return;
            }
            
            const chapter = rangeMatch[1];
            const startVerse = parseInt(rangeMatch[2]);
            const endVerse = rangeMatch[3] ? parseInt(rangeMatch[3]) : startVerse;
            const range = `${chapter}:${startVerse}-${endVerse}`;
            
            const verses = [];
            
            // ë‚˜ë¨¸ì§€ ì¤„ íŒŒì‹±
            for (let i = 1; i < lines.length; i++) {
                const line = lines[i].trim();
                if (!line) continue;
                
                // ì ˆ ë²ˆí˜¸ê°€ ìˆëŠ”ì§€ í™•ì¸ (ì˜ˆ: "1 ì–´ë¦¬ì„ì€..." ë˜ëŠ” "1. ì–´ë¦¬ì„ì€...")
                const verseMatch = line.match(/^(\d+)[\s.)]+(.*)/);
                
                if (verseMatch) {
                    verses.push({
                        num: parseInt(verseMatch[1]),
                        text: verseMatch[2].trim()
                    });
                } else {
                    // ì ˆ ë²ˆí˜¸ê°€ ì—†ìœ¼ë©´ ì´ì „ ì ˆì— ì´ì–´ë¶™ì„
                    if (verses.length > 0) {
                        verses[verses.length - 1].text += ' ' + line;
                    }
                }
            }
            
            if (verses.length === 0) {
                alert('ì„±ê²½ ë³¸ë¬¸ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\n\nì˜ˆì‹œ:\n3:1-5\n1 ì–´ë¦¬ì„ì€ ê°ˆë¼ë””ì•„ ì‚¬ëŒë“¤ì•„...\n2 ë‚´ê°€ ë„ˆí¬ì—ê²Œì„œ...');
                return;
            }
            
            if (!bibleTexts[currentBook]) {
                bibleTexts[currentBook] = {};
            }
            
            bibleTexts[currentBook][currentChapter] = {
                range: range,
                verses: verses
            };
            
            localStorage.setItem('mannaBibleTexts', JSON.stringify(bibleTexts));
            renderBibleText();
            alert(`ì„±ê²½ ë³¸ë¬¸ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤! (${verses.length}ê°œ ì ˆ)`);
        }

        function editBibleText() {
            const bibleData = bibleTexts[currentBook][currentChapter];
            let currentText = bibleData.range + '\n';
            bibleData.verses.forEach(v => {
                currentText += `${v.num} ${v.text}\n`;
            });
            
            document.getElementById('bible-text-modal-title').textContent = 'ì„±ê²½ ë³¸ë¬¸ ìˆ˜ì •';
            document.getElementById('bible-text-input').value = currentText;
            document.getElementById('bible-text-modal').classList.add('active');
        }

        function parseBibleText(input) {
            const lines = input.trim().split('\n');
            if (lines.length < 2) {
                alert('í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                return;
            }
            
            const range = lines[0].trim();
            const verses = [];
            
            for (let i = 1; i < lines.length; i++) {
                const line = lines[i].trim();
                if (!line) continue;
                
                const parts = line.split('|');
                if (parts.length >= 2) {
                    verses.push({
                        num: parseInt(parts[0]),
                        text: parts.slice(1).join('|').trim()
                    });
                }
            }
            
            if (verses.length === 0) {
                alert('ì ˆ ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }
            
            if (!bibleTexts[currentBook]) {
                bibleTexts[currentBook] = {};
            }
            
            bibleTexts[currentBook][currentChapter] = {
                range: range,
                verses: verses
            };
            
            // Firebaseì— ì €ì¥
            database.ref('bibleTexts').set(bibleTexts);
            
            renderBibleText();
            alert('ì„±ê²½ ë³¸ë¬¸ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
        }

        function deleteBibleText() {
            if (confirm('ì´ ì¥ì˜ ì„±ê²½ ë³¸ë¬¸ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                if (bibleTexts[currentBook] && bibleTexts[currentBook][currentChapter]) {
                    delete bibleTexts[currentBook][currentChapter];
                    localStorage.setItem('mannaBibleTexts', JSON.stringify(bibleTexts));
                    renderBibleText();
                }
            }
        }

        function manageBibleText() {
            // ì„±ê²½ ë³¸ë¬¸ì´ ìˆìœ¼ë©´ ìˆ˜ì •/ì‚­ì œ ì˜µì…˜, ì—†ìœ¼ë©´ ì¶”ê°€
            if (bibleTexts[currentBook] && bibleTexts[currentBook][currentChapter]) {
                const action = prompt('ì‘ì—…ì„ ì„ íƒí•˜ì„¸ìš”:\n1. ë³¸ë¬¸ ìˆ˜ì •\n2. ë³¸ë¬¸ ì‚­ì œ\n\në²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš” (1 ë˜ëŠ” 2):');
                
                if (action === '1') {
                    editBibleText();
                } else if (action === '2') {
                    deleteBibleText();
                }
            } else {
                addBibleText();
            }
        }

        // ë¬µìƒ ë‚´ìš© í´ë¦½ë³´ë“œ ë³µì‚¬ (ì¹´í†¡ ê³µìœ ìš©)
        async function copyMeditationToClipboard(index) {
            const book = bibleBooks.find(b => b.id === currentBook);
            const med = meditations[currentBook][currentChapter][index];
            
            let copyText = '';
            
            // ì œëª©
            copyText += `ğŸ“– ${book.name} ${currentChapter}ì¥\n\n`;
            
            // ë¬µìƒ ë‚´ìš©ë§Œ (ì•ë’¤ ê³µë°± ì œê±°)
            copyText += med.content.trim();
            
            try {
                await navigator.clipboard.writeText(copyText);
                
                // ë³µì‚¬ ì„±ê³µ ì•Œë¦¼ (ì¼ì‹œì  í† ìŠ¤íŠ¸)
                const toast = document.createElement('div');
                toast.style.cssText = 'position: fixed; top: 20px; right: 20px; background: #12b886; color: white; padding: 15px 25px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); z-index: 10000; font-weight: 600;';
                toast.textContent = 'âœ“ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!';
                document.body.appendChild(toast);
                
                setTimeout(() => {
                    toast.remove();
                }, 2000);
            } catch (err) {
                alert('ë³µì‚¬ ì‹¤íŒ¨: ' + err.message);
            }
        }

        // Firebaseì—ì„œ ë°ì´í„° ë¡œë“œ
        function loadDataFromFirebase() {
            // ë¬µìƒ ë°ì´í„° ë¡œë“œ
            database.ref('meditations').on('value', (snapshot) => {
                meditations = snapshot.val() || {};
                if (currentBook && currentChapter) {
                    renderMeditationList();
                    renderPersonFilter();
                }
                renderBooksGrid();
            });

            // ì„±ê²½ ë³¸ë¬¸ ë°ì´í„° ë¡œë“œ
            database.ref('bibleTexts').on('value', (snapshot) => {
                const firebaseTexts = snapshot.val();
                if (firebaseTexts) {
                    bibleTexts = firebaseTexts;
                    if (currentBook && currentChapter) {
                        renderBibleText();
                    }
                }
            });

            // ì‚¬ëŒ ëª©ë¡ ë¡œë“œ
            database.ref('personsList').once('value', (snapshot) => {
                const firebasePersons = snapshot.val();
                if (firebasePersons) {
                    personsList = firebasePersons;
                }
            });
        }

        // ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', () => {
            init();
            loadDataFromFirebase();
        });
    </script>
</body>
</html>

